import s,{useEffect as h,useMemo as g,useRef as l,useState as d}from"../../../_snowpack/pkg/react.js";import{useThree as f,useFrame as u,extend as k}from"../../../_snowpack/pkg/@react-three/fiber.js";import{Vector2 as j}from"../../../_snowpack/pkg/three.js";import{EffectComposer as w}from"../../../_snowpack/pkg/three/examples/jsm/postprocessing/EffectComposer.js";import{OutlinePass as P}from"../../../_snowpack/pkg/three/examples/jsm/postprocessing/OutlinePass.js";import{RenderPass as E}from"../../../_snowpack/pkg/three/examples/jsm/postprocessing/RenderPass.js";import{ShaderPass as x}from"../../../_snowpack/pkg/three/examples/jsm/postprocessing/ShaderPass.js";import{FXAAShader as _}from"../../../_snowpack/pkg/three/examples/jsm/shaders/FXAAShader.js";k({EffectComposer:w,RenderPass:E,OutlinePass:P,ShaderPass:x});const A=s.createContext(),X=({children:o,active:p})=>{const{gl:c,scene:t,camera:a,size:e,nodes:S,materials:v}=f(),r=l(),[n,m]=d([]),i=g(()=>new j(e.width,e.height),[e]);return h(()=>r.current.setSize(e.width,e.height),[e]),u(()=>r.current.render(),1),s.createElement(A.Provider,{value:m},o,s.createElement("effectComposer",{ref:r,args:[c]},s.createElement("renderPass",{attachArray:"passes",args:[t,a]}),s.createElement("outlinePass",{attachArray:"passes",args:[i,t,a],selectedObjects:p?n:[],visibleEdgeColor:"white",edgeStrength:3,edgeThickness:1,edgeGlow:0,pulsePeriod:0}),s.createElement("shaderPass",{attachArray:"passes",args:[_],"uniforms-resolution-value":[1/e.width,1/e.height]})))};
