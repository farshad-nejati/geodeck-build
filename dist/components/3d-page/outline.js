import s,{useEffect as h,useMemo as i,useRef as l,useState as f}from"https://cdn.skypack.dev/react";import{useThree as u,useFrame as g,extend as k}from"https://cdn.skypack.dev/@react-three/fiber";import{Vector2 as v}from"https://cdn.skypack.dev/three";import{EffectComposer as y}from"https://cdn.skypack.dev/three/examples/jsm/postprocessing/EffectComposer";import{OutlinePass as P}from"https://cdn.skypack.dev/three/examples/jsm/postprocessing/OutlinePass";import{RenderPass as E}from"https://cdn.skypack.dev/three/examples/jsm/postprocessing/RenderPass";import{ShaderPass as x}from"https://cdn.skypack.dev/three/examples/jsm/postprocessing/ShaderPass";import{FXAAShader as A}from"https://cdn.skypack.dev/three/examples/jsm/shaders/FXAAShader";k({EffectComposer:y,RenderPass:E,OutlinePass:P,ShaderPass:x});const S=s.createContext(),G=({children:c,active:o})=>{const{gl:p,scene:r,camera:a,size:e,nodes:j,materials:w}=u(),t=l(),[n,m]=f([]),d=i(()=>new v(e.width,e.height),[e]);return h(()=>t.current.setSize(e.width,e.height),[e]),g(()=>t.current.render(),1),s.createElement(S.Provider,{value:m},c,s.createElement("effectComposer",{ref:t,args:[p]},s.createElement("renderPass",{attachArray:"passes",args:[r,a]}),s.createElement("outlinePass",{attachArray:"passes",args:[d,r,a],selectedObjects:o?n:[],visibleEdgeColor:"white",edgeStrength:3,edgeThickness:1,edgeGlow:0,pulsePeriod:0}),s.createElement("shaderPass",{attachArray:"passes",args:[A],"uniforms-resolution-value":[1/e.width,1/e.height]})))};
