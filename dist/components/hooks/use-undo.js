import{useReducer as h,useCallback as o}from"https://cdn.skypack.dev/react";const a="UNDO",f="REDO",l="SET",d="RESET",w={past:[],present:null,future:[]},y=(c,n)=>{const{past:t,present:s,future:r}=c;switch(n.type){case a:{const e=t[t.length-1];return{past:t.slice(0,t.length-1),present:e,future:[s,...r]}}case f:{const e=r[0],u=r.slice(1);return{past:[...t,s],present:e,future:u}}case l:{const{newPresent:e}=n;return e===s?c:{past:[...t,s],present:e,future:[]}}case d:{const{newPresent:e}=n;return{past:[],present:e,future:[]}}}},R=c=>{const[n,t]=h(y,{...w,present:c}),s=n.past.length!==0,r=n.future.length!==0,e=o(()=>{s&&t({type:a})},[s]),u=o(()=>{r&&t({type:f})},[r]),i=o(p=>t({type:l,newPresent:p}),[]),E=o(p=>t({type:d,newPresent:p}),[]);return[n,{set:i,reset:E,undo:e,redo:u,canUndo:s,canRedo:r}]};export default R;
