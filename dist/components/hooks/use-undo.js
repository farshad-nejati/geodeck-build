import{useReducer as w,useCallback as o}from"../../../_snowpack/pkg/react.js";const a="UNDO",f="REDO",l="SET",i="RESET",h={past:[],present:null,future:[]},R=(c,n)=>{const{past:t,present:s,future:r}=c;switch(n.type){case a:{const e=t[t.length-1];return{past:t.slice(0,t.length-1),present:e,future:[s,...r]}}case f:{const e=r[0],u=r.slice(1);return{past:[...t,s],present:e,future:u}}case l:{const{newPresent:e}=n;return e===s?c:{past:[...t,s],present:e,future:[]}}case i:{const{newPresent:e}=n;return{past:[],present:e,future:[]}}}},g=c=>{const[n,t]=w(R,{...h,present:c}),s=n.past.length!==0,r=n.future.length!==0,e=o(()=>{s&&t({type:a})},[s]),u=o(()=>{r&&t({type:f})},[r]),d=o(p=>t({type:l,newPresent:p}),[]),E=o(p=>t({type:i,newPresent:p}),[]);return[n,{set:d,reset:E,undo:e,redo:u,canUndo:s,canRedo:r}]};export default g;
