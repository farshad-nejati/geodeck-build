import e,{useState as m,useRef as S,useEffect as h}from"https://cdn.skypack.dev/react";import{Menu as l,Dropdown as A,Avatar as V,Typography as C,Divider as D,Modal as G,Tooltip as n}from"https://cdn.skypack.dev/antd";import{Link as T,useHistory as w}from"https://cdn.skypack.dev/react-router-dom";import{SettingOutlined as B,LogoutOutlined as L,UserOutlined as R,CloseOutlined as O}from"https://cdn.skypack.dev/@ant-design/icons";import{BASE_URL as z}from"../../constant.js";import{useAuth0 as M}from"https://cdn.skypack.dev/@auth0/auth0-react";import{useReactiveVar as a}from"https://cdn.skypack.dev/@apollo/client";import{activeProjectVar as U}from"../../apollo/cache.js";import{Gallery as F,Notification as H}from"https://cdn.skypack.dev/grommet-icons";import $ from"../../pages/gallery.js";import{detailBar as q,bottomBar as J}from"../../apollo/cache.js";import{LeftAffixPanel as K,RightAffixPanel as Q,NavigationPanel as g,UserAffixPanel as W,NavigationItem as p}from"./styles.js";import{galleryPreviewImageVar as X,activePanelVar as Y}from"../../apollo/cache.js";import Z from"https://cdn.skypack.dev/lodash";import ee from"../project-page/project-edit.js";const{Text:te}=C,le=c=>{const o=S();return h(()=>{o.current=c}),o.current},ae=()=>{const c=w(),{logout:o}=M(),d=a(U),f=localStorage.getItem("image"),k=localStorage.getItem("name"),oe=localStorage.getItem("email_verified"),[P,u]=m(!1),[j,E]=m(!1),r=a(Y),re=a(J),t=a(q),_=le(t),i=a(X),x=r===2,[v,y]=m(!1);h(()=>{y(t!==_)},[t,r]);const N=()=>{localStorage.clear(),o({returnTo:window.location.origin})},b=s=>e.createElement(l,null,e.createElement(l.Item,null,s),e.createElement(l.Divider,null),e.createElement(l.Item,{icon:e.createElement(B,null),onClick:()=>c.push("/")},"Setting"),e.createElement(l.Item,{icon:e.createElement(L,null),onClick:N},"Log Out")),I=()=>e.createElement(A,{overlay:b(k),trigger:["click"]},e.createElement(g,null,e.createElement("div",null,e.createElement("a",{className:"",onClick:s=>s.preventDefault()},e.createElement(V,{src:f||"",style:{background:"#929292",border:"3px solid #f2ab1f"},icon:e.createElement(R,null)})," "))));return e.createElement(e.Fragment,null,e.createElement(K,{offsetTop:10,toggle:x},e.createElement(g,null,e.createElement("div",{className:"logo-container"},e.createElement(n,{title:"Go to Projects"},e.createElement(T,{to:"/project",className:"navigation__logo__wrapper"},e.createElement("img",{src:`${z}/logo/logo.png`,className:"image navigation__logo__image"})))),e.createElement(D,{type:"vertical",style:{margin:"0 14px",top:"0",height:"1.4em"}}),e.createElement(n,{title:d?.title},e.createElement(p,{className:"project_name",onClick:()=>E(!0)},e.createElement(te,{type:"secondary",style:{fontSize:"16px"}},Z.truncate(d?.title,{length:23})))))),e.createElement(W,{offsetTop:10,toggle:t,activePanel:r===1,changeDetail:v},I()),e.createElement(Q,{offsetTop:10,toggle:t,activePanel:r===1,changeDetail:v},e.createElement(g,null,e.createElement(n,{title:"Gallery"},e.createElement(p,{style:{padding:"0px 8px"},onClick:()=>u(!0)},e.createElement(F,{color:"#d5d5d5",style:{verticalAlign:"middle"},size:"20px"}))),e.createElement(n,{title:"Notification"},e.createElement(p,{style:{padding:"0px 8px"}},e.createElement(H,{color:"#d5d5d5",style:{verticalAlign:"middle"},size:"20px"}))))),e.createElement(G,{title:i?null:"Gallery",centered:!0,visible:P,className:"modal__gallery",closeIcon:e.createElement(O,{className:"icon__basic"}),bodyStyle:{height:i?"100%":"calc(100% - 5rem)"},closable:!i,onCancel:()=>u(!1),footer:null},e.createElement($,null)),e.createElement(ee,{visible:j,setVisible:E}))};export default ae;
