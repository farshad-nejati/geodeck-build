import e,{useState as m,useRef as I,useEffect as j}from"../../../_snowpack/pkg/react.js";import{Menu as l,Dropdown as S,Avatar as A,Typography as V,Divider as C,Modal as D,Tooltip as n}from"../../../_snowpack/pkg/antd.js";import{Link as G,useHistory as T}from"../../../_snowpack/pkg/react-router-dom.js";import{SettingOutlined as B,LogoutOutlined as L,UserOutlined as R,CloseOutlined as O}from"../../../_snowpack/pkg/@ant-design/icons.js";import{BASE_URL as z}from"../../constant.js";import{useAuth0 as M}from"../../../_snowpack/pkg/@auth0/auth0-react.js";import{useReactiveVar as a}from"../../../_snowpack/pkg/@apollo/client.js";import{activeProjectVar as U}from"../../apollo/cache.js";import{Gallery as F,Notification as H}from"../../../_snowpack/pkg/grommet-icons.js";import $ from"../../pages/gallery.js";import{detailBar as q,bottomBar as J}from"../../apollo/cache.js";import{LeftAffixPanel as K,RightAffixPanel as Q,NavigationPanel as g,UserAffixPanel as W,NavigationItem as p}from"./styles.js";import{galleryPreviewImageVar as X,activePanelVar as Y}from"../../apollo/cache.js";import Z from"../../../_snowpack/pkg/lodash.js";import ee from"../project-page/project-edit.js";const{Text:te}=V,le=c=>{const o=I();return j(()=>{o.current=c}),o.current},ae=()=>{const c=T(),{logout:o}=M(),f=a(U),u=localStorage.getItem("image"),k=localStorage.getItem("name"),oe=localStorage.getItem("email_verified"),[_,d]=m(!1),[P,E]=m(!1),r=a(Y),re=a(J),t=a(q),h=le(t),i=a(X),x=r===2,[v,y]=m(!1);j(()=>{y(t!==h)},[t,r]);const w=()=>{localStorage.clear(),o({returnTo:window.location.origin})},N=s=>e.createElement(l,null,e.createElement(l.Item,null,s),e.createElement(l.Divider,null),e.createElement(l.Item,{icon:e.createElement(B,null),onClick:()=>c.push("/")},"Setting"),e.createElement(l.Item,{icon:e.createElement(L,null),onClick:w},"Log Out")),b=()=>e.createElement(S,{overlay:N(k),trigger:["click"]},e.createElement(g,null,e.createElement("div",null,e.createElement("a",{className:"",onClick:s=>s.preventDefault()},e.createElement(A,{src:u||"",style:{background:"#929292",border:"3px solid #f2ab1f"},icon:e.createElement(R,null)})," "))));return e.createElement(e.Fragment,null,e.createElement(K,{offsetTop:10,toggle:x},e.createElement(g,null,e.createElement("div",{className:"logo-container"},e.createElement(n,{title:"Go to Projects"},e.createElement(G,{to:"/project",className:"navigation__logo__wrapper"},e.createElement("img",{src:`${z}/logo/logo.png`,className:"image navigation__logo__image"})))),e.createElement(C,{type:"vertical",style:{margin:"0 14px",top:"0",height:"1.4em"}}),e.createElement(n,{title:f?.title},e.createElement(p,{className:"project_name",onClick:()=>E(!0)},e.createElement(te,{type:"secondary",style:{fontSize:"16px"}},Z.truncate(f?.title,{length:23})))))),e.createElement(W,{offsetTop:10,toggle:t,activePanel:r===1,changeDetail:v},b()),e.createElement(Q,{offsetTop:10,toggle:t,activePanel:r===1,changeDetail:v},e.createElement(g,null,e.createElement(n,{title:"Gallery"},e.createElement(p,{style:{padding:"0px 8px"},onClick:()=>d(!0)},e.createElement(F,{color:"#d5d5d5",style:{verticalAlign:"middle"},size:"20px"}))),e.createElement(n,{title:"Notification"},e.createElement(p,{style:{padding:"0px 8px"}},e.createElement(H,{color:"#d5d5d5",style:{verticalAlign:"middle"},size:"20px"}))))),e.createElement(D,{title:i?null:"Gallery",centered:!0,visible:_,className:"modal__gallery",closeIcon:e.createElement(O,{className:"icon__basic"}),bodyStyle:{height:i?"100%":"calc(100% - 5rem)"},closable:!i,onCancel:()=>d(!1),footer:null},e.createElement($,null)),e.createElement(ee,{visible:P,setVisible:E}))};export default ae;
