var o=Object.defineProperty;var l=(s,e,t)=>(typeof e!="symbol"&&(e+=""),e in s?o(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t);import h from"../../../_snowpack/pkg/react.js";import{Select as r,Spin as i}from"../../../_snowpack/pkg/antd.js";const{Option:d}=r;class f extends h.Component{constructor(e){super(e);l(this,"state",{data:[],value:[],fetching:!1});l(this,"fetchUser",e=>{console.log("fetching user",e),this.lastFetchId+=1;const t=this.lastFetchId;this.setState({data:[],fetching:!0}),fetch("https://randomuser.me/api/?results=5").then(a=>a.json()).then(a=>{if(t!==this.lastFetchId)return;const n=a.results.map(c=>({text:`${c.name.first} ${c.name.last}`,value:c.login.username}));this.setState({data:n,fetching:!1})})});l(this,"handleChange",e=>{this.setState({value:e,data:[],fetching:!1})});this.lastFetchId=0}render(){const{fetching:e,data:t,value:a}=this.state;return h.createElement(r,{mode:"multiple",labelInValue:!0,value:a,placeholder:"Select users",notFoundContent:e?h.createElement(i,{size:"small"}):null,filterOption:!1,onSearch:this.fetchUser,onChange:this.handleChange,style:{width:"100%"}},t.map(n=>h.createElement(d,{key:n.value},n.text)))}}export default f;
