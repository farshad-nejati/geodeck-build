import{ApolloClient as r,ApolloLink as l,concat as a,InMemoryCache as c}from"../../_snowpack/pkg/@apollo/client.js";import{createUploadLink as i}from"../../_snowpack/pkg/apollo-upload-client.js";import{onError as p}from"../../_snowpack/pkg/@apollo/client/link/error.js";import{API_URL as s}from"../constant.js";const k=i({uri:s}),m=new l((o,e)=>{const t=localStorage.getItem("token");return t&&o.setContext(n=>({headers:{...n.headers,Authorization:`Bearer ${t}`}})),e(o)}),j=p(({networkError:o})=>{o.statusCode===401&&localStorage.removeItem("token")}),u=new r({link:a(m,k),cache:new c,connectToDevTools:!0});export default u;
