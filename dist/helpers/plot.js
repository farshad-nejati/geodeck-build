import s from"../../_snowpack/pkg/lodash.js";import*as u from"./geo-object.js";export const create=e=>{const t=e?.map(r=>createSingle(r));return t.length?getAsObject(t):{}},createSingle=e=>{const{id:t,name:r,type:o,createdAt:n,updatedAt:c,variable:a,variableObjects:l}=e,i=u.getVariableObjects(l),{points:d,lines:p}=u.getDevided(i);return{id:t,name:r,type:o,createdAt:n,updatedAt:c,points:d?.length?d:[],lines:p?.length?p:[],isActive:!1,variable:a||void 0,variableObjects:i}},getAsArray=e=>s.sortBy(Object.values(e),t=>t.createdAt).reverse(),getAsObject=e=>s.mapKeys(e,"id"),findById=(e,t)=>e[t]?e[t]:{},findByIndex=(e,t)=>{const r=getAsArray(e);return r?.length&&r[t]?r[t]:{}},updateList=(e,t)=>t?.id?{...e,[t.id]:t}:e,update=(e,t)=>({...e,...t}),removeTemps=(e,t)=>{const o=getAsArray(e).filter(n=>n?.temp!==!0);return getAsObject([...o,t])},findActiveList=e=>{const r=getAsArray(e).find(o=>o.isActive===!0);return r||{}},changeActive=(e,t,r)=>{const o=update(t,{isActive:!1});let n=findById(e,r);n=update(n,{isActive:!0});let c=updateList(e,o);return c=updateList(c,n),{newActive:n,newItems:c}},removeActiveState=e=>getAsArray(e)?.reduce((r,o)=>{const n=s.omit(o,"isActive");return[...r,n]},[]),extractObjectIds=e=>{const{points:t,lines:r}=e;return[...t,...r]?.reduce((o,n)=>[...o,n.id],[])},extractvariableObjectIds=e=>e?.reduce((t,r)=>[...t,r.id],[]),deletePlot=(e,t)=>{const o=getAsArray(e)?.filter(n=>n.id!==t);return getAsObject(o)};
